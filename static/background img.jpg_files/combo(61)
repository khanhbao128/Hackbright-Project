YUI.add("hermes-template-basic-header-banner",function(e,a){var t=e.Template.Handlebars.revive({compiler:[7,">= 4.0.0"],main:function(e,a,t,n,r){return'<div class="basic-header-banner">\n\t<div class="header-banner-content fluid-centered">\n\t\t<div class="message-container">\n\t\t\t'+e.escapeExpression((t.renderTrustedMarkup||a&&a.renderTrustedMarkup||t.helperMissing).call(null!=a?a:{},null!=a?a.message:a,{name:"renderTrustedMarkup",hash:{},data:r}))+'\n\t\t</div>\n\t\t<div class="button-container">\n\t\t\t<a role="button" class="button dismiss">\n\t\t\t\t<svg class="icon icon-close"><use xlink:href="#icon-close"></use></svg>\n\t\t\t</a>\n\t\t</div>\n\t</div>\n</div>\n'},useData:!0}),n={};e.Array.each([],function(a){var t=e.Template.get("hermes/"+a);t&&(n[a]=t)}),e.Template.register("hermes/basic-header-banner",function(a,r){return r=r||{},r.partials=r.partials?e.merge(n,r.partials):n,t(a,r)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("login-migration-banner-view",function(e,i){require("hermes-core/flog")(i);e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){this.params=e},loadState:function(){var i=this.appContext.getViewer(),t=[];return i.signedIn?(this.set("isCognitoUser",i.isCognitoUser),t.push(this.appContext.getModel("person-models",i.nsid).then(function(e){this.set("hasInvalidEmail",e.getValue("hasInvalidEmail")),this.set("isPro",e.getValue("isPro"))}.bind(this))),t.push(this.appContext.getModel("person-profile-models",i.nsid).then(function(e){this.set("profileModel",e)}.bind(this))),e.Promise.all(t)):(this.set("isCognitoUser",0),e.Promise.resolve())},buildContainer:function(){var i="<p>"+this.intlMessage({intlName:"featured-banner.CHANGES_ARE_COMING"}),t=e.config.flickr.cognito.root+e.config.flickr.cognito["migration-url"];return this.get("hasInvalidEmail")?i+=' <a href="https://flickr.kustomer.help/en_us/add-and-verify-a-new-email-address-ry6qhVBV" target="_blank">'+this.intlMessage({intlName:"featured-banner.UPDATE_YOUR_EMAIL"})+"</a>":i+=' <a href="'+t+'">'+this.intlMessage({intlName:"featured-banner.UPDATE_YOUR_LOGIN"})+"</a>",i+="</p>",this.setContainerWithTemplate("basic-header-banner",{message:i}),this},activate:function(){var e=this.get("container");this.registerEventHandler(e.one(".button.dismiss").on("click",this.dismissBanner.bind(this)))},dismissBanner:function(i){var t=new Date;t.setTime(t.getTime()+828e5),this.appContext.setCookie({cookieName:e.config.flickr.cognito["migration-banner-cookie-name"],cookieValue:1,expires:t,path:"/"}),this.fire("dismiss")},canShowBanner:function(){var i=!1;return!this.appContext.getViewer().signedIn||this.get("isCognitoUser")||this.appContext.getCookie(e.config.flickr.cognito["migration-banner-cookie-name"])||this.isABlacklistedView()||(i=!0),i},isABlacklistedView:function(){var e=this.appContext.flapp.get("activeView").name;return!!(e&&["products-pro-2018-view"].indexOf(e)>-1)}})},"@VERSION@",{requires:["flickr-view","hermes-template-basic-header-banner","user-limits-helper","person-models","person-profile-models"],langBundles:["featured-banner"]});